<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Money Plant Link Pvt. Ltd. FLM Data Entry</title>
    <style>
        /* Your existing styles here */
    </style>
    <script>
        function handleSubmit(event) {
            event.preventDefault(); // Prevent the form from submitting the traditional way
            
            // Show the thank you message
            document.getElementById('thankYouMessage').style.display = 'block';

            // Hide the form
            document.getElementById('myForm').style.display = 'none';

            // Use fetch API to submit the form data
            const formData = new FormData(event.target);
            const data = {};
            formData.forEach((value, key) => data[key] = value);

            fetch('https://script.google.com/macros/s/AKfycby8G8qwhM3s0D4Ws0eTs1AHpSgDWVYy3BG5W5mB_aVC2UiU1ZJGhkp0AigssIDUBlpc-w/exec', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: new URLSearchParams(data)
            })
            .then(response => response.text())
            .then(result => {
                console.log('Success:', result);
                // Redirect to the home page after a short delay
                setTimeout(function() {
                    window.location.href = 'https://mpllflmteam.github.io/mpllflm/'; // Replace with your home page URL
                }, 2000); // Adjust the delay as needed
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    
                    // Save the location data to a hidden input field
                    document.getElementById('Latitude').value = lat;
                    document.getElementById('Longitude').value = lon;
                }, function() {
                    alert('Error: Unable to retrieve your location.');
                });
            } else {
                alert('Geolocation is not supported by this browser.');
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Call the getLocation function when the form is loaded
            getLocation();
        });
    </script>
</head>
<body>
    <header>
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRXbepMX_Wr3Ls3sZu7UgeVzUqh6SucsH5_kg&s" alt="Money Plant Logo">
    </header>
    <h1>FLM Data Entry</h1>

    <form id="myForm" method="post" action="https://script.google.com/macros/s/AKfycby8G8qwhM3s0D4Ws0eTs1AHpSgDWVYy3BG5W5mB_aVC2UiU1ZJGhkp0AigssIDUBlpc-w/exec" onsubmit="handleSubmit(event)">
        <label for="Date">Date:</label>
        <input type="text" id="Date" name="Date" required>
        
        <label for="Zone">Zone:</label>
        <input type="text" id="Zone" name="Zone" required>
        
        <label for="ExecutiveName">Executive Name:</label>
        <input type="text" id="ExecutiveName" name="ExecutiveName" required>
        
        <label for="JobID">Job ID:</label>
        <input type="text" id="JobID" name="JobID" required>
        
        <label for="ATMCRMID">ATM/CRM ID:</label>
        <input type="text" id="ATMCRMID" name="ATMCRMID" required>
        
        <label for="ATMLOCATION">ATM Location:</label>
        <input type="text" id="ATMLOCATION" name="ATMLOCATION" required>
        
        <label for="TypeOfCall">Type Of Call:</label>
        <input type="text" id="TypeOfCall" name="TypeOfCall" required>
        
        <label for="Time">Time:</label>
        <input type="text" id="Time" name="Time" required>
                
        <label for="From">From:</label>
        <input type="text" id="From" name="From" required>
        
        <label for="To">To:</label>
        <input type="text" id="To" name="To" required>
        
        <label for="Transport">Transport:</label>
        <input type="text" id="Transport" name="Transport" required>

        <label for="TravellingAmount">Travelling Amount:</label>
        <input type="text" id="TravellingAmount" name="TravellingAmount" required>
        
        <label for="Remarks">Remarks:</label>
        <textarea id="Remarks" name="Remarks" required></textarea>
        
        <label for="Latitude">Latitude:</label>
        <input type="text" id="Latitude" name="Latitude" readonly>

        <label for="Longitude">Longitude:</label>
        <input type="text" id="Longitude" name="Longitude" readonly>
        
        <button type="submit">Submit</button>
    </form>

    <div id="thankYouMessage">Thank you for your valuable time</div>
    
    <div class="button-container">
        <button onclick="window.open('https://docs.google.com/spreadsheets/d/1FstppDGmBMCmVG5K-owyqD6wl7DKYfFwfCjOC26d-Ag/pubhtml?gid=0&single=true', '_blank')">Show Your Call</button>
        <button onclick="window.open('https://docs.google.com/spreadsheets/d/1Zl8JI8J4TPR3ZOFy3kz-aYIpOOBuQBY8n1hBZ1apm4Y/edit?gid=1995041031#gid=1995041031', '_blank')">Ta Bill Show</button>
    </div>
    
    <footer>
        <p>Version 2.0 - Powered by Rahimul Islam.
        If you need any information please contact 01976755754</p>
    </footer>
</body>
</html>
